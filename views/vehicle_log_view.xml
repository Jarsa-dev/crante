<?xml version="1.0" encoding="UTF-8"?>
<openerp>
    <data>
		<record id="sequence_vehicle_log_type" model="ir.sequence.type">
            <field name="name">Vehicle Log</field>
            <field name="code">vehicle.log.sequence.number</field>
        </record>
        <record id="sequence_vehicle_log" model="ir.sequence">
            <field name="name">Vehicle Log Sequence Number</field>
            <field name="code">vehicle.log.sequence.number</field>
            <field name="prefix">VL</field>
            <field name="padding">4</field>
        </record>
        <record model='ir.ui.view' id='vehicle_log_tree'>
        	<field name='name'>vehicle_log.tree</field>
        	<field name='model'>vehicle.log</field>
        	<field name='type'>tree</field>
        	<field name='arch' type='xml'>
        		<tree string='Vehicle Log'
                      colors="red:state=='in';gray:state=='draft';green:state=='out'">
        			<field name='name'/>
        			<field name='date' attrs="{'readonly': [('state', '!=', 'draft')]}"/>
        			<field name='vehicle_id' attrs="{'readonly': [('state', '!=', 'draft')]}"/>
        			<field name='approved_by' attrs="{'readonly': [('state', '!=', 'draft')]}"/>
        			<field name='date_in'/>
        			<field name='date_out'/>
                    <field name='shop_id'/>
        			<field name='state'/>
                    <field name='sale_state'/>
                    <button string="In" 
                            name="vehicle_in"
                            groups=""
                            states="draft"
                            type="object"
                            icon="gtk-paste-v"/>
                    <button string="Out" 
                            name="vehicle_out"
                            groups=""
                            states="in"
                            type="object"
                            icon="gtk-quit"/>
        		</tree>
        	</field>
        </record>
        <record model='ir.ui.view' id='vehicle_log_form'>
            <field name='name'>vehicle_log.form</field>
            <field name='model'>vehicle.log</field>
            <field name='type'>form</field>
            <field name='arch' type='xml'>
                <form string='Vehicle Log' version="7.0">
                    <header>
                        <button string="In" 
                                name="vehicle_in"
                                groups=""
                                states="draft"
                                type="object"
                                icon="gtk-paste-v"/>
                        <button string="Out" 
                                name="vehicle_out"
                                groups=""
                                states="in"
                                type="object"
                                icon="gtk-quit"/>
                        <field name="state" widget="statusbar"/>
                    </header>
                    <sheet>
                        <h1>
                            <label string='Vehicle Log'/>
                            <field name='name' class='oe_inline'/>
                        </h1>
                        <group col='4'>
                            <field name='vehicle_id'/>
                            <field name='date'/>
                            <field name='approved_by'/>
                            <field name='shop_id' widget='selection'/>
                        </group>
                        <group>
                            <field name='date_in'/>
                            <field name='date_out'/>
                        </group>
                        <field name='business' nolabel='1'/>
                    </sheet>
                </form>
            </field>
        </record>
        <record id="vehicle_log_search" model="ir.ui.view">
            <field name="name">Vehicle Log Search</field>
            <field name="model">vehicle.log</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Vehicle Log">
                    <field name='vehicle_id'/>
                    <field name='approved_by'/>
                    <group  expand='0' string='Grouped by:'>
                        <filter name='default' string='Default' domain="[('state', '!=', 'out')]"/>
                        <filter name='year'
                                string='Year'
                                context="{'group_by': 'year'}"/>
                        <filter name='month'
                                string='Month'
                                context="{'group_by': 'date'}"/>
                        <filter name='week'
                                string='Week'
                                context="{'group_by': 'week'}"/>
                        <filter name='day'
                                string='Day'
                                context="{'group_by': 'day'}"/>
                        <filter name='date_day'
                                string='Month/Day'
                                context="{'group_by': ['date','day']}"/>
                        <filter string="Company"
                                name="company"
                                context="{'group_by': 'shop_id'}"/>
                   </group>
                </search>
            </field>
        </record>
        <record id='action_vehicle_log' model='ir.actions.act_window'>
        	<field name='name'>Vehicle Log</field>
        	<field name='res_model'>vehicle.log</field>
        	<field name='view_type'>form</field>
        	<field name='view_mode'>tree,form</field>
            <field name="context" eval="{'search_default_default': 1}"/>
        </record>
        <menuitem id="vehicle_log_menu" name="Vehicle Log" parent="security_list_menu" action="action_vehicle_log"/>
    </data>
</openerp>